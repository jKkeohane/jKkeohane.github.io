<!DOCTYPE html>
<html>
<head>
  <title>Leaflet Map for case study work</title>
  <link rel="stylesheet" href="leaflet.css"/>
   <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
  <style>
    #map {
      height:1000vh;
      width:1300vh;
    }
    .legend {
      line-height: 18px;
      color: #555;
    }
    .legend i {
      width: 18px;
      height: 18px;
      float: left;
      margin-right: 8px;
      opacity: 0.7;
    }
  </style>
</head>
<body>
<div id="map" style="width: 600px; height: 400px; position: relative; outline-style: none;"
  class="leaflet-container leaflet-touch leaflet-retina leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom"></div>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <div class="leaflet-pane leaflet-map-pane">
    
  </div>
  
  <script type="text/javascript">
    // Create a map instance
      const map = L.map('map').setView([0, 50], 2);

    // Add a tile layer
      const tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxzoom: 19
      attribution: '&copy; <a href="https://openmaptiles.org/">OpenMapTiles</a>'
    }).addTo(map);
    
      L.geoJson(leaflet.geojson).addTo(map);

      // Create a legend
      var legend = L.control({ position: 'topright' });

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<h4>Legend</h4>';
        div.innerHTML += '<i style="background: pink;"></i>University of Bristol<br>';
        div.innerHTML += '<i style="background: green;"></i>University of Manchester<br>';
        return div;
      };

      legend.addTo(map);
  
      // Add circle markers to the map with popups
      for (var i = 0; i < coordinates.length; i++) {
        var coord = coordinates[i];
        var marker = L.circleMarker([coord.lat, coord.lon], { color: getColor(coord.factor) }).addTo(map);
        marker.bindPopup(coord.popupContent);
      }
  
      // Function to determine marker color based on factor
      function getColor(university) {
        switch (university) {
          case 'Bristol':
            return 'pink';
          case 'Manchester':
            return 'green';
          default:
            return 'gray';
        }
      }
  </script>
</body>
</html>
